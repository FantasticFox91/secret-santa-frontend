<script setup>
import './form-field.scss';
defineProps({
  type: {
    type: String,
    default: 'text'
  },
  id: {
    type: String,
    required: true
  },
  label: {
    type: String,
    default: '',
  },
  modelValue: {
    type: String,
  },
})

const emits = defineEmits(['update:modelValue'])

const isHide = ref(true);

const toggleHide = () => {
  isHide.value = !isHide.value;
}

const onInput = (e) => {
  emits('update:modelValue', e.target.value)
}
</script>

<template>
  <div class="form-field">
    <input class="form-field__input" :id="id"  :type="isHide ? type : 'text'" placeholder="" @input="onInput"/>
    <label class="form-field__label" :for="id">{{ label }}</label>
    <button v-if="type === 'password'" class="form-field__password-button" type="button" @click="toggleHide">
      <span class="visually-hidden">Show/hide password</span>
      <svg v-if="isHide" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" fill="none">
        <path fill-rule="evenodd" clip-rule="evenodd" d="M3.05817 3.05703C3.53881 2.57638 4.29512 2.53941 4.81818 2.94611L4.94379 3.05703L23.9749 22.0881C24.0517 22.1493 24.1226 22.2197 24.186 22.2992L28.9438 27.057C29.4645 27.5777 29.4645 28.4219 28.9438 28.9426C28.4631 29.4233 27.7068 29.4603 27.1838 29.0536L27.0582 28.9426L22.9424 24.8269C20.804 26.0506 18.4845 26.6663 16.0016 26.6663C10.1408 26.6663 5.28626 23.2681 1.51065 16.6611C1.27637 16.2512 1.2764 15.7479 1.51073 15.3379C3.09846 12.5603 4.87162 10.352 6.83726 8.72174L3.05817 4.94265C2.53747 4.42195 2.53747 3.57773 3.05817 3.05703ZM8.73261 10.6171C7.21381 11.8331 5.79597 13.4798 4.4839 15.5639L4.21629 15.9996L4.37308 16.2584C7.50832 21.3242 11.2356 23.853 15.6136 23.9934L16.0016 23.9996C17.7693 23.9996 19.4204 23.6204 20.9718 22.8563L17.7271 19.6115C16.2389 20.3245 14.4011 20.064 13.1685 18.8304C11.9365 17.5976 11.6769 15.7611 12.3893 14.2738L8.73261 10.6171ZM14.9808 16.8653L15.1356 17.0201C15.1079 16.9965 15.0809 16.9717 15.0547 16.9455C15.0288 16.9195 15.0042 16.8928 14.9808 16.8653ZM16.0001 5.33294C21.8609 5.33294 26.7155 8.73114 30.4911 15.3381C30.7254 15.7481 30.7253 16.2514 30.491 16.6614C29.4045 18.562 28.2339 20.1936 26.9753 21.5554C26.4755 22.0961 25.6319 22.1293 25.0911 21.6295C24.5503 21.1297 24.5171 20.2861 25.017 19.7453C25.8841 18.8072 26.7141 17.7104 27.5063 16.454L27.7855 15.9997L27.6287 15.7409C24.4934 10.675 20.7658 8.14617 16.3838 8.00579L15.9955 7.9996C14.9319 7.9959 13.8732 8.14246 12.8508 8.43493C12.1429 8.63746 11.4047 8.22771 11.2022 7.51973C10.9997 6.81175 11.4094 6.07364 12.1174 5.87111C13.3813 5.50955 14.69 5.32838 16.0001 5.33294Z" fill="black"/>
      </svg>
      <svg v-else width="32" height="32" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path fill-rule="evenodd" clip-rule="evenodd" d="M12 4C16.2909 4 19.8627 6.4287 22.6646 11.154L22.8844 11.5329L22.9302 11.6328L22.9591 11.716L22.9736 11.7706L22.988 11.853L22.999 11.9535L22.9982 12.0639L22.9849 12.1744C22.9784 12.2112 22.9698 12.2477 22.9591 12.284L22.9203 12.3916L22.8844 12.4671L22.8682 12.4962C20.1039 17.3334 16.5685 19.8773 12.3127 19.9957L12 20C7.6044 20 3.96348 17.4514 1.13177 12.4962C0.956077 12.1887 0.956077 11.8113 1.13177 11.5038C3.96348 6.54862 7.6044 4 12 4ZM12 6C8.59033 6 5.69918 7.89478 3.27859 11.8059L3.161 12L3.27859 12.1941C5.63002 15.9935 8.42551 17.8901 11.709 17.9954L12 18C15.4097 18 18.3008 16.1052 20.7214 12.1941L20.838 12L20.7214 11.8059C18.37 8.00652 15.5745 6.10992 12.291 6.00464L12 6ZM12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9ZM12 11C12.5523 11 13 11.4477 13 12C13 12.5523 12.5523 13 12 13C11.4477 13 11 12.5523 11 12C11 11.4477 11.4477 11 12 11Z" fill="black"/>
      </svg>
    </button>
  </div>
</template>
